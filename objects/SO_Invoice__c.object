<?xml version="1.0" encoding="UTF-8"?>
<CustomObject xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionOverrides>
        <actionName>Accept</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Accept</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>CancelEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Clone</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Delete</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Edit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>List</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>New</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>SaveEdit</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Large</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>Tab</actionName>
        <formFactor>Small</formFactor>
        <type>Default</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <comment>Action override created by Lightning App Builder during activation.</comment>
        <content>Invoice_Record_Page</content>
        <formFactor>Large</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Flexipage</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <comment>Action override created by Lightning App Builder during activation.</comment>
        <content>Invoice_Record_Page</content>
        <formFactor>Small</formFactor>
        <skipRecordTypeSelect>false</skipRecordTypeSelect>
        <type>Flexipage</type>
    </actionOverrides>
    <actionOverrides>
        <actionName>View</actionName>
        <type>Default</type>
    </actionOverrides>
    <allowInChatterGroups>false</allowInChatterGroups>
    <compactLayoutAssignment>SYSTEM</compactLayoutAssignment>
    <deploymentStatus>Deployed</deploymentStatus>
    <enableActivities>false</enableActivities>
    <enableBulkApi>true</enableBulkApi>
    <enableFeeds>false</enableFeeds>
    <enableHistory>true</enableHistory>
    <enableLicensing>false</enableLicensing>
    <enableReports>true</enableReports>
    <enableSearch>true</enableSearch>
    <enableSharing>true</enableSharing>
    <enableStreamingApi>true</enableStreamingApi>
    <externalSharingModel>Private</externalSharingModel>
    <label>Invoice</label>
    <nameField>
        <displayFormat>INV-{00000000}</displayFormat>
        <label>Invoice Name</label>
        <trackHistory>false</trackHistory>
        <type>AutoNumber</type>
    </nameField>
    <pluralLabel>Invoices</pluralLabel>
    <recordTypeTrackHistory>true</recordTypeTrackHistory>
    <searchLayouts>
        <customTabListAdditionalFields>RECORDTYPE</customTabListAdditionalFields>
        <customTabListAdditionalFields>SO_Status__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>SO_Value__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>SO_SAP_Invoice_Number__c</customTabListAdditionalFields>
        <customTabListAdditionalFields>SO_SAP_Account__c</customTabListAdditionalFields>
        <lookupDialogsAdditionalFields>RECORDTYPE</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>SO_Status__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>SO_Value__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>SO_SAP_Invoice_Number__c</lookupDialogsAdditionalFields>
        <lookupDialogsAdditionalFields>SO_SAP_Account__c</lookupDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>RECORDTYPE</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>SO_Status__c</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>SO_Value__c</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>SO_SAP_Invoice_Number__c</lookupPhoneDialogsAdditionalFields>
        <lookupPhoneDialogsAdditionalFields>SO_SAP_Account__c</lookupPhoneDialogsAdditionalFields>
        <searchFilterFields>NAME</searchFilterFields>
        <searchFilterFields>SO_Opportunity__c</searchFilterFields>
        <searchFilterFields>SO_Order__c</searchFilterFields>
        <searchFilterFields>SO_SAP_Account__c</searchFilterFields>
        <searchFilterFields>SO_SAP_Invoice_Number__c</searchFilterFields>
        <searchFilterFields>SO_Value__c</searchFilterFields>
        <searchResultsAdditionalFields>RECORDTYPE</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>SO_Status__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>SO_Value__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>SO_SAP_Invoice_Number__c</searchResultsAdditionalFields>
        <searchResultsAdditionalFields>SO_SAP_Account__c</searchResultsAdditionalFields>
    </searchLayouts>
    <sharingModel>Private</sharingModel>
    <startsWith>Vowel</startsWith>
    <visibility>Public</visibility>
    <fields>
        <fullName>SO_Order__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Order</label>
        <lookupFilter>
            <active>false</active>
            <filterItems>
                <field>$Source.SO_Opportunity__c</field>
                <operation>equals</operation>
                <valueField>Order.OpportunityId</valueField>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>Order</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>SO_Value__c</fullName>
        <externalId>false</externalId>
        <label>Value</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>SO_Status__c</fullName>
        <externalId>false</externalId>
        <formula>If( SO_Is_Void__c ,$Label.SO_Invoice_Void ,
If(NOT(ISBLANK(SO_SAP_Invoice_Date__c)),$Label.SO_Invoice_SAP_Invoice_Paid, IF(NOT(ISBLANK(SO_Payment_Made_Date__c)),$Label.SO_Invoice_Payment_Request_Paid, IF(NOT(ISBLANK(SO_Payment_Request_Sent_Date__c)),$Label.SO_Invoice_Payment_Request_Sent, $Label.SO_Invoice_Planned_Request)) ) )</formula>
        <label>Status</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>SO_Is_Void__c</fullName>
        <defaultValue>false</defaultValue>
        <externalId>false</externalId>
        <label>Is Void</label>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Checkbox</type>
    </fields>
    <fields>
        <fullName>SO_AccountId__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>Account</label>
        <referenceTo>Account</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>SO_Build_Stage__c</fullName>
        <externalId>false</externalId>
        <label>Associated Build Stage</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Picklist</type>
        <valueSet>
            <restricted>true</restricted>
            <valueSetDefinition>
                <sorted>false</sorted>
                <value>
                    <fullName>Stage 1</fullName>
                    <default>false</default>
                    <label>Stage 1</label>
                </value>
                <value>
                    <fullName>Stage 2</fullName>
                    <default>false</default>
                    <label>Stage 2</label>
                </value>
                <value>
                    <fullName>Stage 3</fullName>
                    <default>false</default>
                    <label>Stage 3</label>
                </value>
                <value>
                    <fullName>Stage 4</fullName>
                    <default>false</default>
                    <label>Stage 4</label>
                </value>
                <value>
                    <fullName>Stage 5</fullName>
                    <default>false</default>
                    <label>Stage 5</label>
                </value>
                <value>
                    <fullName>ABS</fullName>
                    <default>false</default>
                    <label>ABS</label>
                </value>
            </valueSetDefinition>
        </valueSet>
    </fields>
    <fields>
        <fullName>SO_Opportunity__c</fullName>
        <deleteConstraint>Restrict</deleteConstraint>
        <externalId>false</externalId>
        <label>Opportunity</label>
        <referenceTo>Opportunity</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>SO_SAP_Account__c</fullName>
        <deleteConstraint>SetNull</deleteConstraint>
        <externalId>false</externalId>
        <label>SAP Account</label>
        <lookupFilter>
            <active>true</active>
            <filterItems>
                <field>SO_SAP_Account__c.SO_Account__c</field>
                <operation>equals</operation>
                <valueField>$Source.SO_AccountId__c</valueField>
            </filterItems>
            <isOptional>false</isOptional>
        </lookupFilter>
        <referenceTo>SO_SAP_Account__c</referenceTo>
        <relationshipLabel>Invoices</relationshipLabel>
        <relationshipName>Invoices</relationshipName>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Lookup</type>
    </fields>
    <fields>
        <fullName>SO_Send_By_Date__c</fullName>
        <externalId>false</externalId>
        <label>Send By Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>SO_Payment_Amount__c</fullName>
        <externalId>false</externalId>
        <label>Payment Amount</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>SO_Payment_Due_Date__c</fullName>
        <externalId>false</externalId>
        <formula>IF(NOT(ISBLANK(SO_Payment_Request_Sent_Date__c)),SO_Payment_Request_Sent_Date__c + 30,null)</formula>
        <label>Payment Due Date</label>
        <required>false</required>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>SO_SAP_Invoice_Date__c</fullName>
        <externalId>false</externalId>
        <label>SAP Invoice Paid Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>SO_Payment_Made_Date__c</fullName>
        <externalId>false</externalId>
        <label>Payment Made Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>SO_SAP_Invoice_Value__c</fullName>
        <externalId>false</externalId>
        <label>SAP Invoice Value</label>
        <precision>18</precision>
        <required>false</required>
        <scale>2</scale>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Currency</type>
    </fields>
    <fields>
        <fullName>SO_Age_of_SAP_Invoice__c</fullName>
        <externalId>false</externalId>
        <formula>If(NOT(ISNULL(SO_SAP_Invoice_Date__c)),SO_SAP_Invoice_Date__c - SO_SAP_Invoice_Raised_Date__c,
	If(NOT(ISNULL(SO_SAP_Invoice_Raised_Date__c)), SO_SAP_Invoice_Raised_Date__c - SO_Payment_Request_Sent_Date__c,
		If((NOT(ISNULL(SO_Payment_Request_Sent_Date__c)) &amp;&amp; ISNULL(SO_SAP_Invoice_Raised_Date__c) ),TODAY() - CASE(MOD( SO_Payment_Request_Sent_Date__c - DATE(1900, 1, 6), 7),
			0,SO_Payment_Request_Sent_Date__c + 2,
			1,SO_Payment_Request_Sent_Date__c + 1,
			2,SO_Payment_Request_Sent_Date__c + 1,
			3,SO_Payment_Request_Sent_Date__c + 1,
			4,SO_Payment_Request_Sent_Date__c + 1,
			5,SO_Payment_Request_Sent_Date__c + 1,
			6,SO_Payment_Request_Sent_Date__c + 3,SO_Payment_Request_Sent_Date__c +1),null
		)
	)
)</formula>
        <label>Age of SAP Invoice</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>SO_SAP_Invoice_Number__c</fullName>
        <externalId>false</externalId>
        <label>SAP Invoice Number</label>
        <length>50</length>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Text</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>SO_Age_of_Payment_Request__c</fullName>
        <externalId>false</externalId>
        <formula>If(ISNULL( SO_Payment_Request_Sent_Date__c ), TODAY() - SO_Send_By_Date__c ,SO_Payment_Request_Sent_Date__c - SO_Send_By_Date__c )</formula>
        <label>Age of Payment Request</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>SO_Age_of_Payment_Received__c</fullName>
        <externalId>false</externalId>
        <formula>If(ISNULL( SO_Payment_Made_Date__c ), TODAY() - SO_Payment_Due_Date__c, SO_Payment_Made_Date__c  - SO_Payment_Due_Date__c)</formula>
        <label>Age of Payment Received</label>
        <precision>18</precision>
        <required>false</required>
        <scale>0</scale>
        <trackHistory>false</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Number</type>
        <unique>false</unique>
    </fields>
    <fields>
        <fullName>SO_SAP_Invoice_Raised_Date__c</fullName>
        <externalId>false</externalId>
        <label>SAP Invoice Raised Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <fields>
        <fullName>SO_Payment_Request_Sent_Date__c</fullName>
        <externalId>false</externalId>
        <label>Sent Date</label>
        <required>false</required>
        <trackHistory>true</trackHistory>
        <trackTrending>false</trackTrending>
        <type>Date</type>
    </fields>
    <recordTypes>
        <fullName>SO_Deposit</fullName>
        <active>true</active>
        <label>Deposit</label>
        <picklistValues>
            <picklist>SO_Build_Stage__c</picklist>
            <values>
                <fullName>ABS</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 1</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 2</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 3</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 4</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 5</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>SO_Invoice</fullName>
        <active>true</active>
        <label>Invoice</label>
        <picklistValues>
            <picklist>SO_Build_Stage__c</picklist>
            <values>
                <fullName>ABS</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 1</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 2</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 3</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 4</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 5</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <recordTypes>
        <fullName>SO_Credit_Note</fullName>
        <active>true</active>
        <label>Credit Note</label>
        <picklistValues>
            <picklist>SO_Build_Stage__c</picklist>
            <values>
                <fullName>ABS</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 1</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 2</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 3</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 4</fullName>
                <default>false</default>
            </values>
            <values>
                <fullName>Stage 5</fullName>
                <default>false</default>
            </values>
        </picklistValues>
    </recordTypes>
    <validationRules>
        <fullName>SO_Opportonity_or_order</fullName>
        <active>true</active>
        <description>Invoice should have either order or opportunity</description>
        <errorConditionFormula>AND(ISBLANK(SO_Opportunity__c),ISBLANK(SO_Order__c))</errorConditionFormula>
        <errorMessage>Either Opportunity or Order should be populated</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>SO_Validate_Invoice_SAP_Paid_Date</fullName>
        <active>true</active>
        <errorConditionFormula>NOT(ISBLANK(SO_SAP_Invoice_Date__c)) &amp;&amp; SO_SAP_Invoice_Date__c &lt; SO_SAP_Invoice_Raised_Date__c</errorConditionFormula>
        <errorMessage>SAP Invoice Date cannot be before SAP Invoice Raised Date.</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>SAP_Account_match_Opportunity_Account</fullName>
        <active>true</active>
        <errorConditionFormula>(ISNEW() || ISCHANGED(SO_AccountId__c) ) &amp;&amp;
NOT(ISBLANK(SO_AccountId__c)) &amp;&amp; SO_Opportunity__r.AccountId !=  SO_AccountId__c</errorConditionFormula>
        <errorDisplayField>SO_AccountId__c</errorDisplayField>
        <errorMessage>You must select the Account associated to the opportunity</errorMessage>
    </validationRules>
    <validationRules>
        <fullName>SO_Validate_Invoice_Payment_Made_Date</fullName>
        <active>true</active>
        <errorConditionFormula>NOT(ISBLANK(SO_Payment_Made_Date__c)) &amp;&amp; SO_Payment_Made_Date__c &lt; SO_Payment_Request_Sent_Date__c</errorConditionFormula>
        <errorMessage>Payment Made Date cannot be before Payment Request Sent Date.</errorMessage>
    </validationRules>
</CustomObject>